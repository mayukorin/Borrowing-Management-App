# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## プロジェクト概要

貸出管理アプリ（Borrowing Management App）

企業内で社員が備品（物品）を貸出・返却できるアプリケーション。
社員は社内にある備品（例：ノートPC、プロジェクター、モニターなど）を予約し、一定期間利用できる。
備品は他の社員と競合しないように管理される。

ドメイン駆動設計（DDD）で実装。

## 主な要素

### 社員（Employee）
- 社員ID、氏名、部署などの基本情報を持つ

### 備品（Equipment）
- 識別子、名称、状態（例：利用可能・貸出中・廃棄済み など）を持つ

### 貸出情報（Borrowing）
- 誰が、どの備品を、いつからいつまで借りるかを管理する

## 機能要件

### 備品の貸出を登録するAPI
- 社員が備品を借りる
- 同じ備品を同期間に別の社員が借りられないようにする
- 備品の状態を「貸出中」に変更する

### 貸出中の備品一覧を取得するAPI
- 現在貸し出されている備品と借りている社員情報を一覧で返す

### 備品を返却するAPI
- 借りた備品を返却できる
- 状態を「利用可能」に戻す

### 備品を新規登録するAPI
- 管理者が備品を登録できる

## ビジネスルール

1. 同じ備品は、同時に複数の貸出レコードを持てない
2. 貸出期間が重なる予約はできない
3. 返却されていない備品を再度貸し出すことはできない
4. 社員が廃棄済み備品を借りることはできない
5. 廃棄済み備品に対する返却はできない

## API仕様

| 機能 | メソッド | パス | リクエスト例 | レスポンス例 |
|------|---------|------|--------------|--------------|
| 備品登録 | POST | /equipments | `{ "name": "プロジェクター" }` | `{ "id": "eq-001", "name": "プロジェクター", "status": "AVAILABLE" }` |
| 貸出登録 | POST | /borrowings | `{ "employeeId": "emp-001", "equipmentId": "eq-001", "period": { "from": "2025-10-10", "to": "2025-10-12" } }` | `{ "id": "brw-001", "employeeId": "emp-001", "equipmentId": "eq-001" }` |
| 返却 | POST | /borrowings/{borrowingId}/return | なし | `{ "status": "RETURNED" }` |
| 貸出中一覧 | GET | /borrowings/active | なし | `[ { "equipmentName": "プロジェクター", "employeeName": "田中太郎" } ]` |

## 非機能要件

- バリデーションエラーやドメインエラーを適切に区別してレスポンスを返す
- 永続化の仕組みは問わない（メモリ上でもよい）

## 実装するとき
@design-memo.md の設計方針に従って実装して